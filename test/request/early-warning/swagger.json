{"openapi":"3.0.0","info":{"title":"JLG_SENTRY","version":"2024/10/15-17:13:26","description":"JLG SENTRY 监控系统BFF中间层服务 API 文档","license":{"name":"swagger.json","url":"http://218.77.107.37:49034/swagger.json"}},"servers":[{"url":"http://218.77.107.37:49034"}],"components":{"securitySchemes":{"Basic":{"type":"apiKey","description":"在下框中输入请求头中需要添加Jwt授权Token:Basic Token","name":"Authorization","in":"header"}},"schemas":{"SourceMap":{"type":"object","description":"解析结果","properties":{"source":{"type":"string","description":"错误源文件"},"line":{"type":"number","description":"错误行号"},"column":{"type":"number","description":"错误列号"},"name":{"type":"string","description":"错误函数名"}}},"SourceMapRequest":{"type":"object","properties":{"fileUrl":{"type":"string","description":"sourceMap源文件地址"},"lineno":{"type":"string","description":"错误行号"},"colno":{"type":"string","description":"错误列号"}}},"SourceMapResult":{"type":"object","properties":{"status":{"type":"integer","description":"1表示成功，2表示失败"},"message":{"type":"string","description":"success表示成功，failed表示失败"},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SourceMap"}}}}},"KafkaRequest":{"type":"object","properties":{"data":{"type":"string","description":"事件JSON字符串内容"}}},"KafkaResult":{"type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"content":{"type":"boolean"}}},"AccountUserAuthModel":{"type":"object","properties":{"accountUid":{"type":"string","description":"用户编码","nullable":true},"userAuths":{"type":"array","items":{"$ref":"#/components/schemas/UserAuthModel"},"description":"用户权限","nullable":true}},"additionalProperties":false},"AuthModel":{"type":"object","properties":{"key":{"type":"string","nullable":true},"value":{"type":"array","items":{"$ref":"#/components/schemas/AuthValueModel"},"nullable":true}},"additionalProperties":false},"AuthValueModel":{"type":"object","properties":{"authName":{"type":"string","nullable":true},"title":{"type":"string","nullable":true}},"additionalProperties":false},"AuthorityModel":{"type":"object","properties":{"key":{"type":"string","description":"键","nullable":true},"title":{"type":"string","description":"描述","nullable":true},"authIndex":{"type":"integer","description":"权限索引","format":"int32"},"isActive":{"type":"boolean","description":"是否有权限"}},"additionalProperties":false},"ErrorMessageModel":{"type":"object","properties":{"uuid":{"type":"string","description":"操作uuid","nullable":true},"timeStamp":{"type":"integer","description":"操作时间","format":"int64"},"type":{"type":"integer","description":"异常类型","format":"int32"},"deviceInfo":{"type":"string","description":"设备信息","nullable":true},"browser":{"type":"string","description":"浏览器","nullable":true},"userCode":{"type":"string","description":"操作人编码","nullable":true},"userName":{"type":"string","description":"操作人名称","nullable":true},"sysCode":{"type":"string","description":"系统编码","nullable":true},"networkType":{"type":"string","description":"网络类型","nullable":true},"content":{"type":"string","description":"错误内容","nullable":true}},"additionalProperties":false},"ErrorMessagePageModel":{"type":"object","properties":{"uuid":{"type":"string","description":"操作uuid","nullable":true},"timeStamp":{"type":"integer","description":"操作时间","format":"int64"},"errorType":{"allOf":[{"$ref":"#/components/schemas/MessageTypeEnum"}],"description":"异常类型 1 = 点击 2 = 页面跳转 3 = js运行错误 4 = 资源加载错误 5 = xhr请求 6 = xhr请求错误 7 = fetch请求 8 = fetch请求错误 9 = 未处理失败promise错误 10 = vue错误 11 = 自定义行为\n","x-enumNames":["点击","页面跳转","js运行错误","资源加载错误","xhr请求","xhr请求错误","fetch请求","fetch请求错误","未处理失败promise错误","vue错误","自定义行为"]},"sysCode":{"type":"string","description":"系统编码","nullable":true},"handlerState":{"type":"integer","description":"处理状态","format":"int32"},"privacy":{"type":"integer","description":"隐私状态 0:公开;1:隐私","format":"int32"}},"additionalProperties":false},"ErrorMessagePageModelIEnumerableInt32Tuple":{"type":"object","properties":{"item1":{"type":"array","items":{"$ref":"#/components/schemas/ErrorMessagePageModel"},"nullable":true},"item2":{"type":"integer","format":"int32"}},"additionalProperties":false},"ErrorMessageQueryModel":{"type":"object","properties":{"pageIndex":{"type":"integer","format":"int32"},"pageSize":{"type":"integer","format":"int32"},"sorts":{"type":"array","items":{"$ref":"#/components/schemas/QuerySorting"},"nullable":true}},"additionalProperties":false},"ErrorrMessagePalybackModel":{"type":"object","properties":{"operationUuid":{"type":"string","description":"操作uuid","nullable":true},"playbackUrl":{"type":"string","description":"回放文件","nullable":true}},"additionalProperties":false},"ICurrentUser":{"type":"object","properties":{"avatar":{"type":"string","nullable":true,"readOnly":true},"accountUid":{"type":"string","nullable":true,"readOnly":true},"auths":{"type":"array","items":{"$ref":"#/components/schemas/AuthModel"},"nullable":true,"readOnly":true},"systems":{"type":"array","items":{"$ref":"#/components/schemas/SystemModel"},"nullable":true,"readOnly":true},"name":{"type":"string","nullable":true},"account":{"type":"string","nullable":true},"accountCode":{"type":"string","nullable":true}},"additionalProperties":false},"MessageTypeEnum":{"enum":[1,2,3,4,5,6,7,8,9,10,11],"type":"integer","description":"1 = 点击 2 = 页面跳转 3 = js运行错误 4 = 资源加载错误 5 = xhr请求 6 = xhr请求错误 7 = fetch请求 8 = fetch请求错误 9 = 未处理失败promise错误 10 = vue错误 11 = 自定义行为\n","format":"int32","x-enumNames":["点击","页面跳转","js运行错误","资源加载错误","xhr请求","xhr请求错误","fetch请求","fetch请求错误","未处理失败promise错误","vue错误","自定义行为"]},"PageRouterAuthModel":{"type":"object","properties":{"routerUid":{"type":"string","description":"全局Id","nullable":true},"routerKey":{"type":"string","description":"页面","nullable":true},"routerName":{"type":"string","description":"页面名称","nullable":true},"auths":{"type":"array","items":{"$ref":"#/components/schemas/AuthorityModel"},"description":"权限","nullable":true}},"additionalProperties":false},"PageRouterEditModel":{"type":"object","properties":{"routerKey":{"type":"string","description":"页面","nullable":true},"routerName":{"type":"string","description":"页面名称","nullable":true},"uid":{"type":"string","description":"页面Uid","nullable":true}},"additionalProperties":false},"PageRouterModel":{"type":"object","properties":{"routerKey":{"type":"string","description":"页面","nullable":true},"routerName":{"type":"string","description":"页面名称","nullable":true}},"additionalProperties":false},"QuerySorting":{"type":"object","properties":{"name":{"type":"string","nullable":true},"order":{"type":"string","nullable":true}},"additionalProperties":false},"SystemEditModel":{"type":"object","properties":{"sysCode":{"type":"string","description":"系统编码","nullable":true},"sysName":{"type":"string","description":"系统名称","nullable":true},"uid":{"type":"string","description":"系统Uid","nullable":true}},"additionalProperties":false},"SystemModel":{"type":"object","properties":{"sysCode":{"type":"string","description":"系统编码","nullable":true},"sysName":{"type":"string","description":"系统名称","nullable":true}},"additionalProperties":false},"SystemPageModel":{"type":"object","properties":{"uid":{"type":"string","description":"系统Uid","nullable":true},"sysCode":{"type":"string","description":"系统编码","nullable":true},"sysName":{"type":"string","description":"系统名称","nullable":true}},"additionalProperties":false,"description":"系统列表模型"},"SystemPageModelIEnumerableInt32Tuple":{"type":"object","properties":{"item1":{"type":"array","items":{"$ref":"#/components/schemas/SystemPageModel"},"nullable":true},"item2":{"type":"integer","format":"int32"}},"additionalProperties":false},"SystemQueryModel":{"type":"object","properties":{"pageIndex":{"type":"integer","format":"int32"},"pageSize":{"type":"integer","format":"int32"},"sorts":{"type":"array","items":{"$ref":"#/components/schemas/QuerySorting"},"nullable":true}},"additionalProperties":false},"UserAuthModel":{"required":["routerUid"],"type":"object","properties":{"routerUid":{"minLength":1,"type":"string","description":"页面全局Id"},"routerKey":{"type":"string","description":"页面Key","nullable":true},"routerName":{"type":"string","description":"页面名称","nullable":true},"auths":{"type":"array","items":{"$ref":"#/components/schemas/AuthorityModel"},"description":"权限","nullable":true}},"additionalProperties":false,"description":"用户权限模型"},"UserModel":{"type":"object","properties":{"uid":{"type":"string","description":"用户Uid","nullable":true},"accountCode":{"type":"string","description":"用户编码","nullable":true,"readOnly":true},"name":{"type":"string","description":"用户名称","nullable":true,"readOnly":true}},"additionalProperties":false,"description":"用户模型"},"UserPageModel":{"type":"object","properties":{"uid":{"type":"string","description":"用户Uid","nullable":true},"accountCode":{"type":"string","description":"用户编码","nullable":true,"readOnly":true},"name":{"type":"string","description":"用户名称","nullable":true,"readOnly":true}},"additionalProperties":false,"description":"用户列表模型"},"UserPageModelIEnumerableInt32Tuple":{"type":"object","properties":{"item1":{"type":"array","items":{"$ref":"#/components/schemas/UserPageModel"},"nullable":true},"item2":{"type":"integer","format":"int32","nullable":true}},"additionalProperties":false},"UserPageQueryModel":{"type":"object","properties":{"pageIndex":{"type":"integer","format":"int32"},"pageSize":{"type":"integer","format":"int32"},"sorts":{"type":"array","items":{"$ref":"#/components/schemas/QuerySorting"},"nullable":true}},"additionalProperties":false},"SystemUserModel":{"type":"object","properties":{"belongs":{"type":"array","items":{"$ref":"#/components/schemas/UserModel"},"description":"已分配用户","nullable":true},"notBelongs":{"type":"array","items":{"$ref":"#/components/schemas/UserModel"},"description":"未分配用户","nullable":true}},"additionalProperties":false},"DistributeSystemUserModel":{"type":"object","properties":{"systemUid":{"type":"string","description":"系统uid","nullable":true},"accountUids":{"type":"array","items":{"type":"string"},"description":"用户uid","nullable":true}},"additionalProperties":false}}},"security":[{"Basic":[]}],"paths":{"/sentry/add-error-message-gif":{"get":{"tags":["sentry"],"summary":"提交错误事件","description":"通过gif发送错误事件到后台\n","parameters":[{"in":"query","name":"data","schema":{"type":"string"},"required":true,"description":"事件内容"}],"responses":{"200":{"description":"Success response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KafkaResult"}}}}}}},"/sentry/add-error-message-rrweb-gif":{"get":{"tags":["sentry"],"summary":"提交错误事件与文件URL的关系","description":"通过gif提交错误事件与文件URL的关系到后台\n","parameters":[{"in":"query","name":"data","schema":{"type":"string"},"required":true,"description":"事件内容"}],"responses":{"200":{"description":"Success response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KafkaResult"}}}}}}},"/sentry/add-error-message-rrweb":{"post":{"tags":["sentry"],"summary":"提交错误事件与文件URL的关系","description":"提交错误事件与文件URL的关系到后台\n","parameters":[{"in":"query","name":"data","schema":{"type":"string"},"required":true,"description":"事件内容"}],"responses":{"200":{"description":"Success response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KafkaResult"}}}}}}},"/sentry/add-error-message":{"post":{"tags":["sentry"],"summary":"提交错误事件","description":"提交错误事件到后台\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KafkaRequest"}}}},"responses":{"200":{"description":"Success response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KafkaResult"}}}}}}},"/page-router/add-page-router":{"post":{"tags":["page-router"],"summary":"添加页面","requestBody":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PageRouterModel"}]}},"text/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PageRouterModel"}]}},"application/*+json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PageRouterModel"}]}}}},"responses":{"200":{"description":"Success","content":{"text/plain":{"schema":{"type":"boolean"}},"application/json":{"schema":{"type":"boolean"}},"text/json":{"schema":{"type":"boolean"}}}}}}},"/system/add-system":{"post":{"tags":["system"],"summary":"添加系统","requestBody":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SystemModel"}]}},"text/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SystemModel"}]}},"application/*+json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SystemModel"}]}}}},"responses":{"200":{"description":"Success","content":{"text/plain":{"schema":{"type":"boolean"}},"application/json":{"schema":{"type":"boolean"}},"text/json":{"schema":{"type":"boolean"}}}}}}},"/system/distribute-system":{"post":{"tags":["system"],"summary":"分配系统","requestBody":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/DistributeSystemUserModel"}]}},"text/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/DistributeSystemUserModel"}]}},"application/*+json":{"schema":{"allOf":[{"$ref":"#/components/schemas/DistributeSystemUserModel"}]}}}},"responses":{"200":{"description":"Success","content":{"text/plain":{"schema":{"type":"boolean"}},"application/json":{"schema":{"type":"boolean"}},"text/json":{"schema":{"type":"boolean"}}}}}}},"/page-router/get-all-page-router-auths":{"post":{"tags":["page-router"],"summary":"查询页面所有权限","responses":{"200":{"description":"Success","content":{"text/plain":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PageRouterAuthModel"}}},"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PageRouterAuthModel"}}},"text/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PageRouterAuthModel"}}}}}}}},"/error-message/get-error-message-to-page":{"post":{"tags":["error-message"],"summary":"查询错误消息列表","requestBody":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/ErrorMessageQueryModel"}]}},"text/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/ErrorMessageQueryModel"}]}},"application/*+json":{"schema":{"allOf":[{"$ref":"#/components/schemas/ErrorMessageQueryModel"}]}}}},"responses":{"200":{"description":"Success","content":{"text/plain":{"schema":{"$ref":"#/components/schemas/ErrorMessagePageModelIEnumerableInt32Tuple"}},"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessagePageModelIEnumerableInt32Tuple"}},"text/json":{"schema":{"$ref":"#/components/schemas/ErrorMessagePageModelIEnumerableInt32Tuple"}}}}}}},"/error-message/get-playback-by-uuid":{"post":{"tags":["error-message"],"summary":"查看回放","parameters":[{"name":"uuid","in":"query","description":"","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"text/plain":{"schema":{"$ref":"#/components/schemas/ErrorrMessagePalybackModel"}},"application/json":{"schema":{"$ref":"#/components/schemas/ErrorrMessagePalybackModel"}},"text/json":{"schema":{"$ref":"#/components/schemas/ErrorrMessagePalybackModel"}}}}}}},"/system/get-system-to-page":{"post":{"tags":["system"],"summary":"查询系统列表","requestBody":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SystemQueryModel"}]}},"text/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SystemQueryModel"}]}},"application/*+json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SystemQueryModel"}]}}}},"responses":{"200":{"description":"Success","content":{"text/plain":{"schema":{"$ref":"#/components/schemas/SystemPageModelIEnumerableInt32Tuple"}},"application/json":{"schema":{"$ref":"#/components/schemas/SystemPageModelIEnumerableInt32Tuple"}},"text/json":{"schema":{"$ref":"#/components/schemas/SystemPageModelIEnumerableInt32Tuple"}}}}}}},"/system/get-system-users":{"post":{"tags":["system"],"summary":"获取系统用户","parameters":[{"name":"uid","in":"query","description":"","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"text/plain":{"schema":{"$ref":"#/components/schemas/SystemUserModel"}},"application/json":{"schema":{"$ref":"#/components/schemas/SystemUserModel"}},"text/json":{"schema":{"$ref":"#/components/schemas/SystemUserModel"}}}}}}},"/user/get-user-to-page":{"post":{"tags":["user"],"summary":"查询用户列表","requestBody":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/UserPageQueryModel"}]}},"text/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/UserPageQueryModel"}]}},"application/*+json":{"schema":{"allOf":[{"$ref":"#/components/schemas/UserPageQueryModel"}]}}}},"responses":{"200":{"description":"Success","content":{"text/plain":{"schema":{"$ref":"#/components/schemas/UserPageModelIEnumerableInt32Tuple"}},"application/json":{"schema":{"$ref":"#/components/schemas/UserPageModelIEnumerableInt32Tuple"}},"text/json":{"schema":{"$ref":"#/components/schemas/UserPageModelIEnumerableInt32Tuple"}}}}}}},"/error-message/handle-error-message":{"post":{"tags":["error-message"],"summary":"处理错误","parameters":[{"name":"uuid","in":"query","description":"","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"text/plain":{"schema":{"type":"boolean"}},"application/json":{"schema":{"type":"boolean"}},"text/json":{"schema":{"type":"boolean"}}}}}}},"/sentry/kafka.gif":{"get":{"tags":["sentry"],"summary":"提交事件","description":"通过gif发送事件到kafka\n","parameters":[{"in":"query","name":"data","schema":{"type":"string"},"required":true,"description":"事件内容"}],"responses":{"200":{"description":"Success response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KafkaResult"}}}}}}},"/sentry/kafka":{"post":{"tags":["sentry"],"summary":"提交事件","description":"发送事件到kafka\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KafkaRequest"}}}},"responses":{"200":{"description":"Success response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KafkaResult"}}}}}}},"/page-router/remove-page-router":{"post":{"tags":["page-router"],"summary":"删除页面","parameters":[{"name":"uid","in":"query","description":"","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"text/plain":{"schema":{"type":"boolean"}},"application/json":{"schema":{"type":"boolean"}},"text/json":{"schema":{"type":"boolean"}}}}}}},"/system/remove-system":{"post":{"tags":["system"],"summary":"删除系统","parameters":[{"name":"uid","in":"query","description":"","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"text/plain":{"schema":{"type":"boolean"}},"application/json":{"schema":{"type":"boolean"}},"text/json":{"schema":{"type":"boolean"}}}}}}},"/sentry/source-map":{"post":{"tags":["sentry"],"summary":"SourceMap解析","description":"解析错误源码位置\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SourceMapRequest"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SourceMapResult"}}}}}}},"/user/sync-account-user":{"post":{"tags":["user"],"summary":"同步用户","requestBody":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/UserModel"}],"description":"用户模型"}},"text/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/UserModel"}],"description":"用户模型"}},"application/*+json":{"schema":{"allOf":[{"$ref":"#/components/schemas/UserModel"}],"description":"用户模型"}}}},"responses":{"200":{"description":"Success","content":{"text/plain":{"schema":{"type":"boolean"}},"application/json":{"schema":{"type":"boolean"}},"text/json":{"schema":{"type":"boolean"}}}}}}},"/error-message/update-error-message-privacy":{"post":{"tags":["error-message"],"summary":"修改错误消息隐私性","parameters":[{"name":"uuid","in":"query","description":"","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"text/plain":{"schema":{"type":"boolean"}},"application/json":{"schema":{"type":"boolean"}},"text/json":{"schema":{"type":"boolean"}}}}}}},"/page-router/update-page-router":{"post":{"tags":["page-router"],"summary":"更新页面","requestBody":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PageRouterEditModel"}]}},"text/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PageRouterEditModel"}]}},"application/*+json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PageRouterEditModel"}]}}}},"responses":{"200":{"description":"Success","content":{"text/plain":{"schema":{"type":"boolean"}},"application/json":{"schema":{"type":"boolean"}},"text/json":{"schema":{"type":"boolean"}}}}}}},"/system/update-system":{"post":{"tags":["system"],"summary":"更新系统","requestBody":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SystemEditModel"}]}},"text/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SystemEditModel"}]}},"application/*+json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SystemEditModel"}]}}}},"responses":{"200":{"description":"Success","content":{"text/plain":{"schema":{"type":"boolean"}},"application/json":{"schema":{"type":"boolean"}},"text/json":{"schema":{"type":"boolean"}}}}}}}},"tags":[]}